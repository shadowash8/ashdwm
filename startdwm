# 1. Environment Variables FIRST
source ~/.zprofile
export QT_QPA_PLATFORM="xcb"
export QT_QPA_PLATFORMTHEME="qt6ct"
export QT_QPA_PLATFORMTHEME="qt5ct"
export XSECURELOCK_SHOW_DATETIME=1
export XSECURELOCK_PASSWORD_PROMPT=asterisks

# 2. Themes
gsettings set org.gnome.desktop.interface gtk-theme "Adwaita"
gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"

# 3. Background Services
/usr/libexec/xdg-desktop-portal &
/usr/libexec/xdg-desktop-portal-lxqt &
/usr/libexec/lxqt-policykit-agent &
dunst &
dwmblocks &
feh --bg-fill ~/Pictures/Wallpapers/r34_night_dark.jpg &
picom &
greenclip daemon &
emacs-gtk+x11 --daemon &
kdeconnectd &
kdeconnect-indicator &
libinput-gestures-setup start &

unclutter &
xss-lock -- sh -c "xsecurelock & sleep 0.5 && systemctl suspend" &
xset s 300 300

# 4. The DWM Loop
exec ssh-agent zsh -c '
while :; do
    dwm 2> ~/.dwm.log || break
done
'
